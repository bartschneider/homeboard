<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Widget Visual Test</title>
    <style>
        /**
         * E-Paper Dashboard Design System
         * Embedded CSS for weather widget testing
         */
        
        /* ===== DESIGN TOKENS ===== */
        :root {
          /* Spacing Scale */
          --spacing-xs: 4px;
          --spacing-sm: 8px;
          --spacing-md: 16px;
          --spacing-lg: 24px;
          --spacing-xl: 32px;
          --spacing-xxl: 48px;
          
          /* Border & Radius */
          --border-radius: 6px;
          --border-radius-lg: 12px;
          --border-width: 1px;
          --border-dotted: 2px dotted;
          --border-solid: 1px solid;
          
          /* Typography Scale */
          --font-size-xs: 11px;
          --font-size-sm: 13px;
          --font-size-md: 16px;
          --font-size-lg: 20px;
          --font-size-xl: 24px;
          --font-size-xxl: 32px;
          --font-size-xxxl: 40px;
          
          /* Font Weights */
          --font-weight-normal: 400;
          --font-weight-medium: 500;
          --font-weight-semibold: 600;
          --font-weight-bold: 700;
          
          /* Line Heights */
          --line-height-tight: 1.2;
          --line-height-normal: 1.4;
          --line-height-relaxed: 1.6;
          
          /* Color Palette - E-Paper Optimized */
          --color-primary: #000000;
          --color-secondary: #333333;
          --color-tertiary: #666666;
          --color-subtle: #999999;
          --color-muted: #cccccc;
          --color-background: #ffffff;
          --color-surface: #fafafa;
          --color-border: #e5e5e5;
          --color-border-strong: #cccccc;
        }
        
        /* ===== RESET & BASE STYLES ===== */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: "Times New Roman", Times, serif;
          font-size: var(--font-size-md);
          font-weight: var(--font-weight-normal);
          line-height: var(--line-height-normal);
          color: var(--color-primary);
          background-color: var(--color-background);
          padding: var(--spacing-lg);
        }
        
        /* Widget Card */
        .widget-card {
          background: var(--color-background);
          border: var(--border-dotted) var(--color-border-strong);
          border-radius: var(--border-radius);
          padding: var(--spacing-lg);
          max-width: 400px;
          margin: 0 auto;
        }
        
        /* Typography */
        .value {
          font-size: var(--font-size-xl);
          font-weight: var(--font-weight-bold);
          color: var(--color-primary);
          line-height: var(--line-height-tight);
          margin: 0;
        }
        
        .value--small {
          font-size: var(--font-size-md);
        }
        
        .value--huge {
          font-size: var(--font-size-xxxl);
        }
        
        .description {
          font-size: var(--font-size-sm);
          color: var(--color-secondary);
          line-height: var(--line-height-relaxed);
          margin: 0;
        }
        
        .meta {
          font-size: var(--font-size-xs);
          color: var(--color-subtle);
          font-style: italic;
          line-height: var(--line-height-normal);
          margin: 0;
        }
        
        .label {
          font-size: var(--font-size-xs);
          font-weight: var(--font-weight-medium);
          color: var(--color-tertiary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin: 0;
        }
        
        .subtitle {
          font-size: var(--font-size-md);
          font-weight: var(--font-weight-semibold);
          color: var(--color-secondary);
          line-height: var(--line-height-tight);
          margin: 0;
        }
        
        .subtitle--small {
          font-size: var(--font-size-sm);
        }
        
        /* Weather Components */
        .weather-current {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          margin-bottom: var(--spacing-md);
        }
        
        .weather-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 80px;
          height: 80px;
        }
        
        .weather-temp {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-xs);
          flex: 1;
        }
        
        .weather-divider {
          border-top: var(--border-solid) var(--color-border);
          margin: var(--spacing-md) 0;
        }
        
        /* Metrics Grid */
        .metrics-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-md);
        }
        
        .metric-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-md);
          border: var(--border-solid) var(--color-border);
          border-radius: var(--border-radius);
          background: var(--color-surface);
        }
        
        .metric-icon {
          font-size: var(--font-size-lg);
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: var(--color-background);
          border-radius: var(--border-radius);
          border: var(--border-solid) var(--color-border);
        }
        
        .metric-info {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-xs);
          flex: 1;
        }
        
        .hourly-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }
        
        .hour-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: var(--spacing-xs);
          text-align: center;
          padding: var(--spacing-sm);
          border-radius: var(--border-radius);
          border: var(--border-solid) var(--color-border);
        }
        
        /* Utility Classes */
        .text-center { text-align: center; }
        .mb-sm { margin-bottom: var(--spacing-sm); }
        .mt-md { margin-top: var(--spacing-md); }
        
        /* Error State */
        .widget-error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          gap: var(--spacing-md);
          padding: var(--spacing-xl);
          border: var(--border-dotted) var(--color-muted);
          border-radius: var(--border-radius);
          background: var(--color-surface);
        }
        
        .error-icon {
          font-size: var(--font-size-xxl);
          color: var(--color-subtle);
        }
        
        .error-message {
          font-size: var(--font-size-sm);
          color: var(--color-secondary);
          line-height: var(--line-height-relaxed);
        }
        
        .error-hint {
          font-size: var(--font-size-xs);
          color: var(--color-subtle);
          font-style: italic;
          line-height: var(--line-height-relaxed);
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 24px;">üå§Ô∏è Enhanced Weather Widget</h1>
    
    <div class="widget-card">
        <div id="weather-output">Loading weather data...</div>
    </div>
    
    <script>
        async function loadWeather() {
            try {
                // Simulate loading weather widget output
                const response = await fetch('data:text/plain;charset=utf-8,' + encodeURIComponent(`
    <div class="weather-current">
        <div class="weather-icon">
            <span style="font-size: 48px;">‚õÖ</span>
        </div>
        <div class="weather-temp">
            <div class="value value--huge">23¬∞</div>
            <div class="description">Partly Cloudy</div>
            <div class="meta">Feels like 25¬∞C</div>
        </div>
    </div>
    
    <div class="weather-divider"></div>
    
    <div class="metrics-grid">
        <div class="metric-item">
            <div class="metric-icon">üíß</div>
            <div class="metric-info">
                <div class="label">Humidity</div>
                <div class="value value--small">68%</div>
            </div>
        </div>
        <div class="metric-item">
            <div class="metric-icon">üí®</div>
            <div class="metric-info">
                <div class="label">Wind Speed</div>
                <div class="value value--small">12.5 km/h</div>
            </div>
        </div>
    </div>
    
    <div class="weather-divider"></div>
    
    <div class="subtitle subtitle--small text-center mb-sm">Next 4 Hours</div>
    <div class="hourly-grid">
        <div class="hour-item">
            <div class="meta">19:00</div>
            <div style="font-size: 20px; margin: 4px 0;">‚õÖ</div>
            <div class="value value--small">22¬∞</div>
        </div>
        <div class="hour-item">
            <div class="meta">20:00</div>
            <div style="font-size: 20px; margin: 4px 0;">‚òÅÔ∏è</div>
            <div class="value value--small">21¬∞</div>
        </div>
        <div class="hour-item">
            <div class="meta">21:00</div>
            <div style="font-size: 20px; margin: 4px 0;">‚òÅÔ∏è</div>
            <div class="value value--small">20¬∞</div>
        </div>
        <div class="hour-item">
            <div class="meta">22:00</div>
            <div style="font-size: 20px; margin: 4px 0;">üåô</div>
            <div class="value value--small">19¬∞</div>
        </div>
    </div>
    
    <div class="mt-md text-center">
        <div class="meta">London, England</div>
        <div class="meta">Updated: ${new Date().toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit'})}</div>
    </div>
                `));
                
                const html = await response.text();
                document.getElementById('weather-output').innerHTML = html;
                
            } catch (error) {
                document.getElementById('weather-output').innerHTML = `
                    <div class="widget-error">
                        <div class="error-icon">üå§Ô∏è</div>
                        <div class="error-message">Failed to load weather data</div>
                        <div class="error-hint">This is a visual test example</div>
                    </div>
                `;
            }
        }
        
        // Load weather when page loads
        loadWeather();
    </script>
</body>
</html>